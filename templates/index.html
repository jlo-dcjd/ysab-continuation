<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="{{url_for('static', filename='/style.css')}}"> 
  <title>YSAB Continuation</title>   
  <link rel="icon" href="{{url_for('static', filename='images/ysab-icon-green.svg')}}">
</head>

<form action="/submit_form" method="POST">
<div class="container">
  <div class="center">
    <img src="{{url_for('static', filename='images/juvenile-logo.svg')}}" alt="Dallas Juvenile Logo" width="100" height="100">
  </div>
</div>
    <header>
      <h2>Dallas County Juror Fund YSAB Continuation Project (No Application) (YSAB Funds)</h2>
      <div>Dallas County jurors have the option of contributing their juror fund stipend to help at risk youth in the Dallas County Juvenile Department and the foster care system.  The Youth Services Advisory Board (YSAB) oversees the use of the Dallas County Juror Fund for special projects to address specific concerns related to juvenile crime prevention. In order to be eligible for YSAB recommendation, Dallas County Juvenile Department fund requestors must complete the following application. </div>
    </header>

    <h3>Submission Instructions:</h2>
        <ol>
            <li>Applicants must answer all questions</li>
            <li>Length of responses must adhere to the specified word limit indicated in the question</li>
            <li>Applicants must click the submit button to complete the application</li>
          </ol>

    <p><b>Disclaimer:</b> For privacy and security reasons, please be advised not to include any confidential or sensitive information in your submission.</p>

    <div>
      <label for="app_record" style="color: #001aff">
        <b>Select Application Record</b>
      </label>
      <div>
        <select id="app_record" name="app_record">
          <option disabled selected>Choose an item</option>
          {% for item in app_list %}
            {% set split_item = item.split(' : ') %}
            {% set display_item = split_item[0] ~ ' : ' ~ split_item[1] %}
          <option value="{{ item }}">{{ display_item }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <script>
      document.getElementById("app_record").addEventListener("change", function() {
        // Get the selected option
        var selectedOption = this.options[this.selectedIndex];
        // Split the value of selected option to get name, email, and project title
        var values = selectedOption.value.split(' : ');
        // Populate the fields
        document.getElementById("name").value = values[1];
        document.getElementById("app_title").value = values[2];
        document.getElementById("email").value = values[3];
        document.getElementById("phone").value = values[4];
        document.getElementById("title").value = values[5];
        document.getElementById("amount_awarded").value = parseInt(values[6]);
        document.getElementById("service_area").value = values[7];
        document.getElementById("facility").value = values[8];
        document.getElementById("address").value = values[9];
        document.getElementById("problem_statement").value = values[10];
        document.getElementById("category1").value = values[11];
        document.getElementById("category2").value = values[12];
        document.getElementById("category3").value = values[13];
        document.getElementById("category4").value = values[14];
        document.getElementById("category5").value = values[15];
        document.getElementById("category6").value = values[16];
        document.getElementById("category7").value = values[17];
        document.getElementById("description1").value = values[18];
        document.getElementById("description2").value = values[19];
        document.getElementById("description3").value = values[20];
        document.getElementById("description4").value = values[21];
        document.getElementById("description5").value = values[22];
        document.getElementById("description6").value = values[23];
        document.getElementById("description7").value = values[24];
       document.getElementById("cost1").value = values[25];
        document.getElementById("cost2").value = values[26];
        document.getElementById("cost3").value = values[27];
        document.getElementById("cost4").value = values[28];
        document.getElementById("cost5").value = values[29];
        document.getElementById("cost6").value = values[30];
        document.getElementById("cost7").value = values[31];
       document.getElementById("items1").value = values[32];
        document.getElementById("items2").value = values[33];
        document.getElementById("items3").value = values[34];
        document.getElementById("items4").value = values[35];
        document.getElementById("items5").value = values[36];
        document.getElementById("items6").value = values[37];
        document.getElementById("items7").value = values[38];
        document.getElementById("total1").value = values[39];
        document.getElementById("total2").value = values[40];
        document.getElementById("total3").value = values[41];
        document.getElementById("total4").value = values[42];
        document.getElementById("total5").value = values[43];
        document.getElementById("total6").value = values[44];
        document.getElementById("total7").value = values[45];
        document.getElementById("grandTotal").value = values[46];
        document.getElementById("youth_total_input").value = values[47];
        document.getElementById("benefit_per_youth").value = values[48];

        });
    </script>

    <div>
    <br>
      <label for="name">Applicant Name</label>
      <div>
        <input id="name" name="name" type="text" size="8" tabindex="1" oninput="checkField('name', 'app_title')" required>
      </div>
    </div>

    <div>
        <label for="app_title">
        Applicant Title
        </label>
        <div>
          <input id="app_title" name="app_title" type="text" size="8" tabindex="1" oninput="checkField('app_title', 'email')">
       </div>
    </div>

    <div>
        <label for="email">
          Applicant Contact Email
        </label>
        <div>
          <input id="email" name="email" type="email" spellcheck="false" value="" maxlength="255" tabindex="3" required oninput="checkField('email', 'phone')"> 
       </div>
    </div>

    <div>
      <label for="phone">
        Applicant Contact Phone Number
      </label>
      <div>
        <input id="phone" name="phone" type="tel" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="123-456-7890" oninput="formatPhoneNumber(this);checkField('phone', 'title')" maxlength="12" required>
      </div>
    </div>
  <script>
    function formatPhoneNumber(input) {
      // Remove any non-numeric characters
      var phoneNumber = input.value.replace(/\D/g, '');

      // Check if the length is greater than 10, trim it
      if (phoneNumber.length > 10) {
        phoneNumber = phoneNumber.substr(0, 10);
      }

      // Add dashes in the required format
      var formattedPhoneNumber =
        phoneNumber.slice(0, 3) + '-' + phoneNumber.slice(3, 6) + '-' + phoneNumber.slice(6, 10);

      // Update the input field value
      input.value = formattedPhoneNumber;
    }

    // function checkField(currentFieldId, nextFieldId) {
    //     const currentField = document.getElementById(currentFieldId);
    //     const nextField = document.getElementById(nextFieldId);
        
    //     if (currentField.value.trim() !== '') {
    //         nextField.removeAttribute('disabled');
    //     } else {
    //         nextField.setAttribute('disabled', 'disabled');
    //     }
    // }
  </script>

    <div>
      <label for="application_renewal">
            Application Renewal
      </label>
      <div>
        This form is intended solely for non-application continuation projects.
      </div>
    </div>

  <h3>Profile</h3>
    <div>
        <label for="title">
          Project Title
        </label>
        <div>
          <input id="title" name="title" type="text"  value="" size="8" tabindex="1" oninput="checkField('title', 'service_area')">
       </div>
    </div>

    <div>
        <label for="service_area">
            Service Area
        </label>
        <div>
        <select id="service_area" name="service_area" class="field select medium" tabindex="11" oninput="checkField('service_area', 'facility')"> 
          <option disabled selected>Choose an item</option>
          <option value="Clinical Services">Clinical Services</option>
          <option value="Detention Services">Detention Services</option>
          <option value="Educational Services">Educational Services</option>
          <option value="Probation Services">Probation Services</option>
          <option value="Residential Services">Residential Services</option>
          <option value="Administration">Administration</option>
        </select>
        </div>
    </div>

    <div>
        <label for="facility">
        Facility/Program to Administer the Project
        </label>
        <div>
          <input id="facility" name="facility" type="text"  value="" size="8" tabindex="1" oninput="checkField('facility', 'address')">
       </div>
    </div>

    <div>
        <label for="address">
        Address
        </label>
        <div>
          <input id="address" name="address" type="text" value="" size="8" tabindex="1" oninput="checkField('address', 'amount_awarded')">
       </div>
    </div>

    <div>
        <label for="amount_awarded">
        Original Amount Awarded
        </label>
        <div>
          <input id="amount_awarded" name="amount_awarded" type="number" value="" size="8" tabindex="1" min="1" max="99999" oninput="checkField('amount_awarded', 'amount_requested')">
       </div>
    </div>

    <div>
      <label for="amount_requested">
      Amount Requested For The Continuation Period
      </label>
      <div>
        <input id="amount_requested" name="amount_requested" type="number" value="" size="8" tabindex="1" min="1" max="99999" required oninput="checkField('amount_requested', 'budget_admended')">
     </div>
  </div>


  <div>
    <label for="budget_amended">
        Will budget be amended? (If Yes, complete budget amended below. If No, then do not complete the budget amendment)
    </label>
    <div>
    <select id="budget_amended" name="budget_amended" tabindex="11"> 
      <option disabled selected>Choose an item</option>
      <option value="Yes">Yes</option>
      <option value="No">No</option>
    </select>
    </div>
</div>

    <h3>Problem Statement</h3>

    <div>
      <label for="problem_statement">(Identify the continued challenges your program faces that will be addressed through using YSAB funds and how these funds will contribute to enhancing the program's objectives)</label>
      <div>
        <textarea id="problem_statement" name="problem_statement" spellcheck="true" rows="6" cols="50" tabindex="4" placeholder="" oninput="checkField('problem_statement', 'continuation_justification')"></textarea>
      </div>
  </div>

  <h3>Continuation Justification</h3>

    <div>
      <label for="continuation_justification">(<u><b>Justify</b></u> the continuation of this YSAB funded project)</label>
      <div>
        <textarea id="continuation_justification" name="continuation_justification" spellcheck="true" rows="10" cols="50" tabindex="4" placeholder="Maximum 250 words"></textarea>
      </div>
  </div>

  <h3>Budget Admendment</h3>
    <br>
    <div>
      <label class="desc" id="budget_estimate" for="budget_estimate"><b>Budget Estimate</b>: Indicate the different categories of expenses proposed in the project. Provide, in the “Description” column, an explanation of each expense associated with the category.  Expenses listed in the budget must be justified in the Project Approach & Activities section.</label>
      <div>
        <p>Category definitions: Use the follow category definitions as guidelines for selecting the appropriate label.</p>
        <ul>
          <li><b>Food</b>: Expenses related to food for various occasions. Items could include but not limited to: lunch, dinners, snacks, refreshments, pantry items.</li>
          <li><b>Gifts</b>: Expenditures made as a gesture of goodwill, appreciation, or celebration. They are not tied to incentives or rewards for specific achievements or behaviors. Items could include but not limited to: gift bags, small electronics, notebooks, makeup.</li>
          <li><b>SEM (Supplies, Equipment, Materials)</b>: Expenditures related to supplies, equipment, or materials for enhancing the program's activities and enriching the experience for participants. Items could include but not limited to: school/art supplies, games (table games, board games, gym games, etc.), books, decorations.</li>
          <li><b>Field Trips</b>: Expenditures related to organizing and facilitating educational or recreational outings outside of the program's usual location.</li>
          <li><b>Clothing</b>: Expenditures related to the purchase of clothing items such as uniforms, or other attire, as needed.</li>
          <li><b>Scholarships</b>: Expenditures related to providing financial assistance to individuals to support their education. Scholarships may take various forms, including monetary awards, educational materials such as textbooks or laptops, or direct payment for tuition and/or fees to educational institutions.</li>
          <li><b>Other</b>: For expenditures that do not fit into any of the predefined budget categories.</li>
        </ul>
      </div>
      <div>
    
        <table id="budget_estimate">
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Cost per Item</th>
                    <th>Number of Items</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>      
                      <select id="category1" name="category1" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description1" name="description1"></td>
                    <td><input type="text" id="cost1" name="cost1"></td>
                    <td><input type="text" id="items1" name="items1"></td>
                    <td><input type="text" id="total1" name="total1"></td>
                </tr>
                <tr>
                    <td>      
                      <select id="category2" name="category2" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description2" name="description2"></td>
                    <td><input type="text" id="cost2" name="cost2"></td>
                    <td><input type="text" id="items2" name="items2"></td>
                    <td><input type="text" id="total2" name="total2"></td>
                </tr>
                <tr>
                    <td>      
                      <select id="category3" name="category3" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description3" name="description3"></td>
                    <td><input type="text" id="cost3" name="cost3"></td>
                    <td><input type="text" id="items3" name="items3"></td>
                    <td><input type="text" id="total3" name="total3"></td>
                </tr>
                <tr>
                  <td>      
                    <select id="category4" name="category4" class="field select medium" tabindex="11"> 
                      <option value="Null"></option>
                      <option value="Food">Food</option>
                      <option value="Gifts">Gifts</option>
                      <option value="SEM">SEM</option>
                      <option value="Field Trips">Field Trips</option>
                      <option value="Clothes">Clothes</option>
                      <option value="Scholarships">Scholarships</option>
                      <option value="Other">Other</option>
                    </select>
                  </td>
                    <td><input type="text" id="description4" name="description4"></td>
                    <td><input type="text" id="cost4" name="cost4"></td>
                    <td><input type="text" id="items4" name="items4"></td>
                    <td><input type="text" id="total4" name="total4"></td>
                </tr>
                <tr>
                    <td>      
                      <select id="category5" name="category5" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description5" name="description5"></td>
                    <td><input type="text" id="cost5" name="cost5"></td>
                    <td><input type="text" id="items5" name="items5"></td>
                    <td><input type="text" id="total5" name="total5"></td>
                </tr>
                <tr>
                    <td>      
                      <select id="category6" name="category6" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description6" name="description6"></td>
                    <td><input type="text" id="cost6" name="cost6"></td>
                    <td><input type="text" id="items6" name="items6"></td>
                    <td><input type="text" id="total6" name="total6"></td>
                </tr>
                <tr>
                    <td>      
                      <select id="category7" name="category7" class="field select medium" tabindex="11"> 
                        <option value="Null"></option>
                        <option value="Food">Food</option>
                        <option value="Gifts">Gifts</option>
                        <option value="SEM">SEM</option>
                        <option value="Field Trips">Field Trips</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Scholarships">Scholarships</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                    <td><input type="text" id="description7" name="description7"></td>
                    <td><input type="text" id="cost7" name="cost7"></td>
                    <td><input type="text" id="items7" name="items7"></td>
                    <td><input type="text" id="total7" name="total7"></td>
                </tr>
            </tbody>
        </table>
      </div>
    
      <div>
        <table class="grand-total-table" id="budget_estimate">
          <thead>
              <tr>
                  <th>Overall Project Cost</th>
                  <td><input type="text" name="grandTotal" id="grandTotal"></td>
              </tr>
          </thead>
        </table>
      </div>

      <div>
        <table class="grand-total-table" id="youth_total">
          <thead>
            <tr>
              <th>Number of Youth Who Will Benefit</th>
              <td><input type="text" name="youth_total" id="youth_total_input" required></td>
            </tr>
          </thead>
        </table>
      </div>
      
      <div>
        <table class="grand-total-table">
          <thead>
            <tr>
              <th>Individual Youth Benefit ($)</th>
              <td><input type="text" name="benefit_per_youth" id="benefit_per_youth"></td>
            </tr>
          </thead>
        </table>
      </div>
      
      <script>
        // JavaScript to calculate the total based on cost per item and number of items
        document.addEventListener("input", function(e) {
          if (e.target.name.startsWith("cost") || e.target.name.startsWith("items")) {
            const index = e.target.name.slice(-1);
            const cost = parseFloat(document.getElementsByName("cost" + index)[0].value) || 0;
            const items = parseInt(document.getElementsByName("items" + index)[0].value) || 0;
            const total = cost * items;
            document.getElementsByName("total" + index)[0].value = total.toFixed(2);
      
            // Calculate and update the Grand Total
            calculateGrandTotal();
          }
        });
      
        function calculateGrandTotal() {
          const totalInputs = document.querySelectorAll('[name^="total"]');
          let grandTotal = 0;
          totalInputs.forEach(input => {
            grandTotal += parseFloat(input.value) || 0;
          });
          document.getElementById("grandTotal").value = grandTotal.toFixed(2);
        }
      
        document.addEventListener("input", function(e) {
          if (e.target.id === "grandTotal" || e.target.id === "youth_total_input") {
            calculateBenefitPerYouth();
          }
        });

        function calculateBenefitPerYouth() {
          // console.log("Calculating benefit per youth...");
          const budgetEstimate = parseFloat(document.getElementById('grandTotal').value);
          const youthTotal = parseInt(document.getElementById('youth_total_input').value);
          const benefitPerYouthInput = document.querySelector('[name="benefit_per_youth"]');

          if (!isNaN(budgetEstimate) && !isNaN(youthTotal) && youthTotal !== 0) {
            const benefitPerYouth = budgetEstimate / youthTotal;
            // console.log("Benefit per youth:", benefitPerYouth.toFixed(2));
            benefitPerYouthInput.value = benefitPerYouth.toFixed(2);
          } else {
            benefitPerYouthInput.value = '';
          }
        }
      </script>
    </div> 

  </div> 
  
    <br><br>
    <div>
      <label><b>Optional: </b>Save a copy of your application via screenshot. Capture the current state of your application for reference using the following instructions based on your browser of choice.</label>
      <div>
        <b>For Edge/Chrome:</b>
        <ol>
          <li>Press Ctrl + Shift + S. This will open the screenshot window.</li>
          <li>In the screenshot window, select "Capture full page".</li>
          <li>Once the full page is captured, you can save it to your computer.</li>
        </ol>
        <br>
        <b>For Firefox:</b>
        <ol>
          <li>Right-click anywhere on the page.</li>
          <li>From the context menu, select "Take screenshot".</li>
          <li>In the screenshot tool, choose "Full page".</li>
          <li>Once the full page is captured, you can save it to your computer.</li>
        </ol>
      </div>
    </div>

    <div class="container">
      <div class="center">
        <input id="saveForm" name="saveForm" type="submit" value="Submit" class="submit-button" color="blue">
      </div>
    </div>

  </form>

  <footer>
    <p>Date Updated: May 17, 2024<br>
  </footer>
</html>